CREATE DATABASE ‘chibchadb’;

CREATE TABLE USUARIO(
cedula INTEGER PRIMARY KEY,
correo VARCHAR(30),
contrasenia VARCHAR(30),
cod_t_usuario INTEGER);

CREATE TABLE T_USUARIO(
cod_t_usuario INTEGER PRIMARY KEY,
nom_t_usuario VARCHAR(30));

ALTER TABLE USUARIO ADD CONSTRAINT fk_cod_t_usuario FOREIGN KEY (cod_t_usuario) REFERENCES T_USUARIO(cod_t_usuario);

CREATE TABLE EMPLEADO(
cedula INTEGER PRIMARY KEY,
nombre VARCHAR(30),
cod_t_empleado INTEGER);

CREATE TABLE T_EMPLEADO(
cod_t_empleado INTEGER PRIMARY KEY,
nom_t_empleado varchar(30));

ALTER TABLE EMPLEADO ADD CONSTRAINT fk_cod_t_empleado FOREIGN KEY (cod_t_empleado) REFERENCES T_EMPLEADO(cod_t_empleado);
CREATE TABLE ADMINISTRADOR(
cedula INTEGER PRIMARY KEY,
nombre VARCHAR(30));

CREATE TABLE MODOPAGO(
cod_m_pago INTEGER PRIMARY KEY,
nom_m_pago VARCHAR(30));

CREATE TABLE PLANPAGO(
cod_p_pago INTEGER PRIMARY KEY,
nom_p_pago VARCHAR(30));

CREATE TABLE PAQUETE(
cod_paquete INTEGER PRIMARY KEY,
nom_paquete VARCHAR(30),
val_paquete INTEGER);

CREATE TABLE CLIENTE(
cedula INTEGER PRIMARY KEY,
nom_cliente VARCHAR(30),
tarjeta INTEGER,
cod_p_pago INTEGER,
cod_paquete INTEGER,
cod_m_pago INTEGER);

ALTER TABLE CLIENTE ADD CONSTRAINT fk_cod_m_pago FOREIGN KEY (cod_m_pago) REFERENCES MODOPAGO(cod_m_pago);

ALTER TABLE CLIENTE ADD CONSTRAINT fk_cod_p_pago FOREIGN KEY (cod_p_pago) REFERENCES PLANPAGO(cod_p_pago);

ALTER TABLE CLIENTE ADD CONSTRAINT fk_cod_paquete FOREIGN KEY (cod_paquete) REFERENCES PAQUETE(cod_paquete);

CREATE TABLE ESTADO(
cod_estado INTEGER PRIMARY KEY,
nom_estado VARCHAR(30));

CREATE TABLE T_TICKET(
cod_t_ticket INTEGER PRIMARY KEY,
nom_t_usuario VARCHAR(50));

CREATE TABLE DOMINIO(
cod_dominio INTEGER PRIMARY KEY,
cedula INTEGER,
nom_dominio VARCHAR(30));

CREATE TABLE TICKET(
cod_ticket INTEGER PRIMARY KEY,
cod_t_ticket INTEGER,
cod_dominio INTEGER,
descripcion VARCHAR(225),
cod_estado INTEGER);

ALTER TABLE TICKET ADD CONSTRAINT fk_cod_dominio FOREIGN KEY (cod_dominio) REFERENCES DOMINIO(cod_dominio);

ALTER TABLE TICKET ADD CONSTRAINT fk_cod_t_ticket FOREIGN KEY (cod_t_ticket) REFERENCES T_TICKET(cod_t_ticket);

ALTER TABLE TICKET ADD CONSTRAINT fk_cod_estado FOREIGN KEY (cod_estado) REFERENCES ESTADO(cod_estado);

CREATE TABLE REGISTRADOR(
cod_registrador INTEGER PRIMARY KEY,
nom_registrador VARCHAR(30),
cod_pais INTEGER);

CREATE TABLE PAIS(
cod_pais INTEGER PRIMARY KEY,
nom_pais VARCHAR(30));

ALTER TABLE REGISTRADOR ADD CONSTRAINT fk_cod_pais FOREIGN KEY (cod_pais) REFERENCES PAIS(cod_pais);

CREATE TABLE DISTRIBUIDOR(
cedula INTEGER PRIMARY KEY,
nom_distribuidor VARCHAR(30),
cod_t_distribuidor INTEGER);

CREATE TABLE T_DISTRIBUIDOR(
cod_t_distribuidor INTEGER PRIMARY KEY,
nom_t_distribuidor VARCHAR(30),
cod_comision INTEGER);

CREATE TABLE COMISION(
cod_comision INTEGER PRIMARY KEY,
val_comision INTEGER);


ALTER TABLE DISTRIBUIDOR ADD CONSTRAINT fk_cod_t_distribuidor FOREIGN KEY (cod_t_distribuidor) REFERENCES T_DISTRIBUIDOR(cod_t_distribuidor);
ALTER TABLE T_DISTRIBUIDOR ADD CONSTRAINT fk_cod_comision FOREIGN KEY (cod_comision) REFERENCES COMISION(cod_comision);



ALTER TABLE USUARIO ADD CONSTRAINT fk_cedula FOREIGN KEY (cedula) REFERENCES EMPLEADO(cedula);

ALTER TABLE USUARIO ADD CONSTRAINT fk_cedula1 FOREIGN KEY (cedula) REFERENCES REGISTRADOR(cod_registrador);

ALTER TABLE USUARIO ADD CONSTRAINT fk_cedula2 FOREIGN KEY (cedula) REFERENCES CLIENTE(cedula);

ALTER TABLE USUARIO ADD CONSTRAINT fk_cedula3 FOREIGN KEY (cedula) REFERENCES DISTRIBUIDOR(cedula);

ALTER TABLE USUARIO ADD CONSTRAINT fk_cedula4 FOREIGN KEY (cedula) REFERENCES ADMINISTRADOR(cedula);

ALTER TABLE DOMINIO ADD CONSTRAINT fk_cedula5 FOREIGN KEY (cedula) REFERENCES CLIENTE(cedula);

